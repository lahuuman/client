<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hàng có sẵn - WIBU STORE</title>
    <link rel="stylesheet" href="/do_an\css\hangcosan.css">
</head>
<body>
        <div class="menu" id="menu1">
            <div>
                <div style="height: 50px;">
                    <a href="#" id="x" onclick="closeNav()" style="float: right;">&times;</a>
                </div>
                <ul>
                <li><a href="#">Trang chủ</a></li>
                <li><a href="#">About us</a></li>
                <li><a href="#">Services</a></li>
                <li><a href="#">Hàng có sẵn</a></li>
                <li><a href="#">Hàng order</a></li>
                <li><a href="#">Đăng nhập/đăng ký</a></li>
                </ul>
            </div>
        </div>
        <div class="header">
            <div style="width: 200px;"> <span id="trangchu" onclick="openNav()" style="position: absolute;top:calc(50% - 20px); font-size:25px;cursor:pointer;">&#9776; WIBU STORE</span> </div>
            <div class="container" style="width:calc(100% - 200px);">
                <input id="searchInput" type="text" placeholder="Tìm kiếm">
                <button onclick="searchProducts()">Tìm kiếm</button>
                <button onclick="refesh()"> refesh </button>
                <input type="number" id="product-per-page">
                <p>Product Per Page</p>
                <button onclick="mix_product_per_page()">enter</button>
                <button style="margin-left: 100px;" onclick="admin_mode()"><h2>Thêm/Xóa/Tùy chọn sản phẩm</h2></button>
            </div>
        </div>
        <div id="admin">
            <div id="are-you-sure">
                <h2 style="display: flex; justify-content: center;">Are you sure</h2>
                <div style="display: flex;">
                    <button id="YES">Yes</button>
                    <button id="NO">No</button>
                </div>
            </div>
            <div id="config">
                <h1 style="display: flex; justify-content: center;">Tùy chỉnh</h1>
                <h2>Tên sản phẩm</h2> <input id="config-name" type="text" placeholder="New name">
                <h2>Giá sản phẩm</h2> <input id="config-price" type="number" placeholder="New price">
                <h2>Loại mới</h2> <input id="config-type" type="text" placeholder="New type">
                <h2>Link ảnh mới</h2> <input id="config-img" type="text" placeholder="New image">
                <div class="choice">
                    <button id="config-OK" style="float: right;">Đồng ý</button>
                    <button id="config-NO" style="float: right;">Hủy</button>
                </div>
            </div>
            <div id="add-product">
                <h1 style="display: flex; justify-content: center;">Thêm sản phẩm</h1>
                <h2>Tên sản phẩm</h2> <input id="add-name" type="text" placeholder="Name">
                <h2>Giá sản phẩm</h2> <input id="add-price" type="number" placeholder="Price">
                <h2>Loại mới</h2> <input id="add-type" type="text" placeholder="Type">
                <h2>Link ảnh mới</h2> <input id="add-img" type="text" placeholder="Image">
                <div class="choice">
                    <button id="add-OK" style="float: right;">Đồng ý</button>
                    <button id="add-NO" style="float: right;">Hủy</button>
                </div>
            </div>
            <div style="height: 50px; display: flex; position: relative;">
                <div style="position: relative; left: 50%;"><h2>Danh sách sản phẩm</h2></div>
                <img onclick="add()" style="width:50px; position: absolute ; left: 90%;" src="ảnh/Screenshot 2023-10-14 025015.png" alt="">
            </div>
            <table id="list" style="width: 100%; margin-left: 50px;"></table>
        </div>
        <div class="main">
            <div class="sidebar-content" >
                <div class="Filter-by-price">
                    <div class="container" style="height: 50px; background-color: red ;border: 3px solid black;">
                        <h2 style="color: white;">Lọc theo giá</h2>
                    </div>
                    <div class="Filter">
                        <div class="min">
                            <p>Min</p>
                            <input id="min-price" style="margin-left: 12px; width: 202px;" type="number" placeholder="VND">
                        </div>
                        <div class="max">
                            <p>Max </p>
                            <input id="max-price" style="margin-left: 10px;width: 202px;" type="number" placeholder="VND">
                        </div>
                        <button style="float: right;" onclick="Filterbyprice()">Lọc</button>
                    </div>
                </div>
                <ul>
                    <li style="background-color: red; color:white"><h2>Danh mục sản phầm</h2></li>
                    <li><a onclick="refesh()" href="#">Tất cả sản phẩm</a></li>
                    <li><a onclick="figure()" href="#">Firuge</a></li>
                    <li><a onclick="set_figure()" href="#">Bộ Firuge</a></li>
                    <li><a onclick="mini_figure()" href="#">Firuge mini</a></li>
                    <li><a onclick="cosplay()" href="#">Cosplay</a></li>
                </ul>
            </div>
            <div class="site-main">
                <div class="container" style="height: 47px;">
                    <h2 class="tieude" style="background-color: aquamarine">Hàng có sẵn</h2>
                </div>
                <div  style="display: block; width: 90px;">
                    <p style="margin: 0px;" onclick="sort()">Sort by:</p>
                    <div id="container-sort" style="display: none ;height: 50px;">
                        <p style=" margin: 0px; float: right;" onclick="sort_by_name()">Tên</p>
                        <br>
                        <p style=" margin: 0px; float: right;" onclick="sort_by_price()">Giá</p>
                    </div>
                </div>
                <div class="archive-product">
                </div>
            </div>
        </div>
        <div class="phantrang">
            <button onclick="previousPage()" class="pagination-button">Previous</button>
            <div id="Page" ></div>
            <button onclick="nextPage()" class="pagination-button">Next</button>
        </div>
        <div class="bottom" style="height:100px; background-color: palevioletred;">
            <li><a href="https://www.facebook.com/HoiNhungConSoiCoDoc">Thông tin liên hệ</a></li>
        </div>
    <script>
        var currentPage = 1;
        var ProductPerPage = 2*5; //2*n 
        var productList = []; //mảng để lưu sản phẩm
        var productList2 = [];//mảng phụ để tìm kiếm, phân loại
        //phân trang
        function phan_trang()
        {
            var trang = document.getElementsByClassName("product-inner");
            var StartIndex = (currentPage - 1) * ProductPerPage;
            var EndIndex = StartIndex + ProductPerPage;
            var page = document.getElementById("Page");
            page.innerHTML = currentPage;
            for(var i=0;i<trang.length;i++)
            {
                trang[i].style.display = 'none';
            }
            for(var i=StartIndex;i<EndIndex;i++)
            {
                trang[i].style.display = 'block';
            }
        }
        function previousPage()
        {
            if(currentPage > 1)
            {
                currentPage--;
            }
            phan_trang()
        }
        function nextPage()
        {   
            var product = document.getElementsByClassName("product-inner");
            var max = Math.ceil(product.length/ProductPerPage);
            if(currentPage < max)
            {
                currentPage++;
            }
            phan_trang()
        }
        function openNav()
        {
            const danhsach = document.getElementById('menu1')
            danhsach.style.display = 'block';
        }
        function closeNav()
        {
            const close = document.getElementById('menu1')
            close.style.display = 'none';
        }
        function searchProducts()
        {   
            var input = document.getElementById("searchInput").value.toLowerCase();
            var after = [];
            for (var i = 0; i < productList2.length; i++) 
            {
                    if (productList2[i].name.toLowerCase().indexOf(input) > -1) 
                    {
                       after.push(productList2[i]);
                    } 
            }
            productList2 = after;
            displayProduct(productList2);
        }
        function Filterbyprice()
        {
            var max = parseFloat(document.getElementById("max-price").value);
            var min = parseFloat(document.getElementById("min-price").value);
            var after = [];
            for(var i = 0; i < productList2.length; i++)
            {
                if (productList2[i].price >= min && productList2[i].price <= max) 
                {
                    after.push(productList2[i]);
                }
            }
            productList2 = after;
            displayProduct(productList2);
        }
        function refesh()
        {       
            productList2 = productList;
            displayProduct(productList2);
        }
        //phân loại 
        function figure()
        {   
            refesh();
            var after = [];
            for(var i = 0 ;i<productList2.length ; i++)
            {
                if(productList[i].type === 1) after.push(productList2[i]);
            }
            productList2 = after;
            displayProduct(productList2);
            currentPage = 1;
            phan_trang();
        }
        function mini_figure()
        {   
            refesh();
            var after = [];
            for(var i = 0 ;i<productList2.length ; i++)
            {
                if(productList[i].type === 2) after.push(productList2[i]);
            }
            productList2 = after;
            displayProduct(productList2);
        }
        function set_figure()
        {   
            refesh();
            var after = [];
            for(var i = 0 ;i<productList2.length ; i++)
            {
                if(productList[i].type === 3) after.push(productList2[i]);
            }
            productList2 = after;
            displayProduct(productList2);
        }
        function cosplay()
        {   
            refesh();
            var after = [];
            for(var i = 0 ;i<productList2.length ; i++)
            {
                if(productList[i].type === 4) after.push(productList2[i]);
            }
            productList2 = after;
            displayProduct(productList2);
        }

        function addProduct(name , price, type, img)
        {
            var product = {
                name: name,
                price: price,
                type: type,
                img: img
            };
            productList.push(product);
            productList2=productList;
        }
        addProduct("Mô hình figure: Luffy gear 4",400000,1,"ảnh/Figure/fig820-luffy-gear-4-pop-xxl-2-400x400.jpg");
        addProduct("Mô hình figure: Thủy trụ hơi thở của nước",330000,1,"ảnh/Figure/giyuu.png");
        addProduct("Mô hình figure: Hà trụ ăn cơm",250000,1,"ảnh/Figure/hà trụ ăn cơm nắm.jpg");
        addProduct("Mô hình figure: Marco lửa xanh",450000,1,"ảnh/Figure/marco.jpg");
        addProduct("Mô hình figure: Phong trụ hơi thở của gió",300000,1,"ảnh/Figure/phong trụ.png");
        addProduct("Mini figure: Spider Man bám tường",230000,2,"ảnh/mini/Spider-Man-Bam-Tuong-2-300x300.jpg");
        addProduct("Mini figure: Deadpool cầm kiếm",240000,2,"ảnh/mini/Deadpool-cam-kiem-2-300x300.jpg");
        addProduct("Mini figure: Buu tập boxing",230000,2,"ảnh/mini/mfig002-majin-buu-tap-boxing-2.jpg");
        addProduct("Mini figure: Anya ngồi",100000,2,"ảnh/mini/mfig040-anya-forger-ngoi-2.jpg");
        addProduct("Mini figure: Buu đu xà ngang",200000,2,"ảnh/mini/mfig062-majin-buu-du-xa-ngang-2.jpg");
        addProduct("Mini figure: Nezuke cầm ống tre",150000,2,"ảnh/mini/mfig051-nezuko-kamado-cam-ong-tre-2.jpg");
        addProduct("Bộ figure: Thất vũ hải",350000,3,"ảnh/set/figs034-one-piece-10pcs-de-xanh-toc-cam-04-2.jpg");
        addProduct("Bộ figure: Uchiha Itachi",600000,3,"ảnh/set/figs114-uchiha-itachi-n-nhoc-sasuke-2-400x400.jpg");
        addProduct("Bộ figure: Genshin Impact",500000,3,"ảnh/set/figs142-genshin-6pcs-de-xam-02-1-1.jpg");
        addProduct("Bộ figure: Hội áo choàng",400000,3,"ảnh/set/figs223-naruto-6pcs-3-toc-vang-10-6.png");
        addProduct("Bộ figure: Gia đinh Forger",350000,3,"ảnh/set/figs226-spy-x-family-4pcs-1.jpg");
        addProduct("Cosplay: Găng tay Hatake Kakashi",160000,4,"ảnh/cosplay/cos004-doi-gang-tay-hatake-kakashi-2-1-400x400.jpg");
        addProduct("Cosplay: Kunai và băng trán làng Lá",100000,4,"ảnh/cosplay/cos018-bo-4-mon-3-kunai-naruto-day-trang-bang-tran-lang-la-2-400x400.jpg");
        addProduct("Cosplay: Áo Goku hình chữ Ngộ",200000,4,"ảnh/cosplay/COS091-Cosplay-Son-Goku-Chu-Ngo-4.jpg");
        addProduct("Cosplay: Áo Goku hình chữ Quy",200000,4,"ảnh/cosplay/COS092-Cosplay-Son-Goku-Chu-Quy-2.jpg");
        
        function displayProduct(a) // xuất sản phẩm của mảng a ra màn hình
        {   
            var archiveProduct = document.querySelector('.archive-product');
            archiveProduct.innerHTML = ''; 
            var parent = document.getElementsByClassName("archive-product");
            for(var i=0;i<a.length;i++)
            {
                var product = a[i];
                var element = document.createElement("div");
                element.className = "product-inner";
                var innerHTML = 
                '<div class="product-inner" type=" ' + product.type + ' ">'+
                        '<div class="product-image">'+
                            '<a href="#">'+
                            '<img src=" '+ product.img +' " alt=" ' + product.name + ' ">'+
                            '</a>'+
                        '</div>'+
                        '<div class="product-content">'+
                            '<div class="name-figure">'+
                                '<a href="#"><h3 style="font-size: 15px; color: purple;">' + product.name + '</h3></a>'+
                            '</div>'+
                            '<div class="price">'+
                                '<p style="color: purple;" class="price-product" data-price=" ' + product.price + ' ">Giá:' + product.price + '</p>'+
                            '</div>'+
                        '</div>'+
                    '</div>'
                    element.innerHTML = innerHTML;
                    parent[0].appendChild(element);
            }
            currentPage = 1;
            phan_trang();
        }
        function mix_product_per_page()
        {
            var productInput = document.getElementById("product-per-page");
            var product = parseFloat(productInput.value);
            if(product>0) 
            {
                ProductPerPage = 2 * product;
                currentPage = 1;
                phan_trang();
            }
        }
        window.onload = function() {
        displayProduct(productList);
        };
        function dark_mode()
        {   
            var color = document.body;
            if(color.style.backgroundColor  === "black")
            {
                color.style.backgroundColor = "wheat";
                var myButton = document.getElementById("darkmode");
                myButton.innerHTML = "Dark mode"
            }
            else 
            {
                color.style.backgroundColor = "black";
                var myButton = document.getElementById("darkmode");
                myButton.innerHTML = "Light mode"
            }
        }
        var sort1 = false;
        // sắp xếp 
        function sort()
        {
            var sortbutton = document.getElementById("container-sort")
            if(sort1 === false) sortbutton.style.display = "block";
            else sortbutton.style.display = "none";
            sort1=!sort1;
        }
        function sort_by_name()
        {
            for(var i=0;i<productList2.length -1 ;i++)
            {
                var index = i;
                for(var j = i+1 ; j<productList2.length ; j++)
                if(productList2[index].name>productList2[j].name) index = j;
                var product = productList2[i];
                productList2[i] = productList2[index];
                productList2[index] = product;
                displayProduct(productList2)
            }
        }
        function sort_by_price()
        {
            for(var i=0;i<productList2.length -1 ;i++)
            {
                var index = i;
                for(var j = i+1 ; j<productList2.length ; j++)
                if(productList2[index].price>productList2[j].price) index = j;
                var product = productList2[i];
                productList2[i] = productList2[index];
                productList2[index] = product;
                displayProduct(productList2)
            }
        }

        var openadminmode = false; //mở admin mode
        function admin_mode()
        {
            a = document.getElementById("admin");
            if(openadminmode === false) 
            {
                a.style.display = "block";
                adminmode();
            }
            else a.style.display = "none";
            openadminmode = !openadminmode;
        }
        function adminmode() //cập nhật danh sách sản phẩm
        {   
            table = document.getElementById("list");
            table.innerHTML = 
            '<tr>'+
                '<td><h5>Tên sản phẩm</h5></td>'+
                '<td><h5>Giá sản phẩm</h5></td>'+
                '<td><h5>Loại sản phẩm</h5></td>'+
                '<td><h5>config</h5></td>'+
                '<td><h5>remove</h5></td>'+
            '</tr>'
            for(var i = 0;i<productList.length; i++)
            {
                var element = document.createElement("tr");
                var innerHTML = 
                '<tr>'+
                '<td><h5>'+productList[i].name+'</h5></td>'+
                '<td><h5>'+productList[i].price+'</h5></td>'+
                '<td><h5>'+productList[i].type+'</h5></td>'+
                '<td><h5><button onclick="config('+i+')" >&#9881;</button></h5></td>'+
                '<td><h5><button class="remove-button" onclick="remove('+i+')" style="background-color: red;">&times;</button></h5></td>'+
                '</tr>';
                element.innerHTML = innerHTML;
                table.appendChild(element);
            }
        }
       //xóa sản phẩm
        function updateList(i)
        {   
            var copy = [];
            for(var k = 0;k < productList.length ; k++)
            {
                if(k!=i) copy.push(productList[k]);
            }
            productList = copy;
            productList2 = copy;
        }
        function appear_sure()
        {
            open = document.getElementById("are-you-sure");
            open.style.display = "block";
        }
        function disappear_sure()
        {
            open = document.getElementById("are-you-sure");
            open.style.display = "none";
        }
        function remove(i)
        {
            appear_sure()
            var yes = document.getElementById("YES");
            yes.onclick = function(){
                disappear_sure();
                updateList(i);
                adminmode();
                displayProduct(productList);
            };
            var no = document.getElementById("NO");
            no.onclick = function(){disappear_sure()};
        }
       //sửa sản phẩm
        function config(i)
        {
            openConfig();
            var ok = document.getElementById("config-OK");
            var no = document.getElementById("config-NO");
            ok.onclick = function() 
            {
                var name = document.getElementById("config-name").value;
                var price = document.getElementById("config-price").value;
                var type = document.getElementById("config-type").value;
                var img = document.getElementById("config-img").value;
                configProduct(i,name,price,type,img);
                adminmode()
                displayProduct(productList);
                closeConfig();
            }
            no.onclick = function() 
            {
                closeConfig();
            }
        }
        function configProduct(i, name, price, type, img)
        {
            if(name !== "") productList[i].name = name;
            if(price !== "") productList[i].price = price;
            if(type !== "") productList[i].type = type;
            if(img !== "") productList[i].img = img;
            productList2 = productList;
        }
        function openConfig()
        {
            var open = document.getElementById("config");
            open.style.display = "block";
        }
        function closeConfig()
        {
            var close = document.getElementById("config");
            close.style.display = "none";
        }
        //thêm sản phẩm
        function openAdd()
        {
            var open = document.getElementById("add-product")
            open.style.display = "block";
        }
        function closeAdd()
        {
            var close = document.getElementById("add-product")
            close.style.display = "none";
        }
        function add()
        {
            openAdd();
            var OK = document.getElementById("add-OK");
            var NO = document.getElementById("add-NO");
            OK.onclick = function()
            {
                var name = document.getElementById("add-name").value;
                var price = document.getElementById("add-price").value;
                var type = document.getElementById("add-type").value;
                var img = document.getElementById("add-img").value;
                if(name!==""&&price!==""&&type!==""&&img!=="")
                {
                    addProduct(name,price,type,img);
                    displayProduct(productList);
                    adminmode();
                    closeAdd();
                }
            }
            NO.onclick = function()
            {
                closeAdd();
            }
        }
    </script>
</body>
</html>